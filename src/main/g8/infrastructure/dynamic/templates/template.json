{
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Description" : "AWS CloudFormation Sample Template Parameter_Validate: Sample template showing how to validate string and numeric parameters. This template does not create any billable AWS Resources.",
    "Parameters" : {
        "ApplicationName": {
            "Description": "The application name",
            "Type": "String"
        },
        "DeploymentEnv": {
            "Description": "The environment to refer to this component stack",
            "Type"       : "String"
        },
        "CloudFormationBucket":{
            "Description": "CloudFormation Bucket ",
            "Type": "String"
        },
        "CloudFormationKey":{
            "Description": "CloudFormation Key",
            "Type"       : "String"
        },
        "CloudFormationCommonKey":{
            "Description": "CloudFormation Key",
            "Type"       : "String",
            "Default"    : "common/latest"
        },
        "BuildVersion": {
            "Description": "The version of the build",
            "Type"       : "String"
        },
        "NotificationTaskCpuAllocation": {
            "Description": "CPU allocation of notification the task",
            "Type"       : "String",
            "Default"    : "512"
        },
        "NotificationTaskMemoryAllocation": {
            "Description": "Memory allocation of notification the task",
            "Type"       : "String",
            "Default"    : "2048"
        },
        "NotificationDesiredCount": {
            "Description": "Desired count of the notification task",
            "Type"       : "String",
            "Default"    : "2"
        },
        "EnvECSClusterStack":{
            "Description": "ECS Cluster Repository",
            "Type"       : "String"
        },
        "VpcId": {
            "Description": "Application VPC",
            "Type"       : "String"
        }
    },
    "Resources" : {
        "mySubTemplate": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "TemplateURL": {
                    "Fn::Sub": ["https://s3-$"$"${AWS::Region}.amazonaws.com/$"$"${bucket}/$"$"${bucketKey}/$"$"${version}/cloudformation/dynamic/template-wait.json", {
                        "bucket"   : {"Ref": "CloudFormationBucket"},
                        "bucketKey": {"Ref": "CloudFormationKey"},
                        "version"  : {"Ref": "BuildVersion"}
                    }]
                },
                "Parameters":{
                    "ApplicationName": {"Ref": "ApplicationName"},
                    "DeploymentEnv"  : {"Ref": "DeploymentEnv"}
                }
            }
        },
        "myWaitHandle" : {
            "Type" : "AWS::CloudFormation::WaitConditionHandle"
        }
    },
    "Outputs" : {
        "ApplicationName" : {
            "Value" : {"Ref" : "ApplicationName" }
        },
        "DeploymentEnv" : {
            "Value" : {"Ref" : "DeploymentEnv" }
        },
        "CloudFormationBucket" : {
            "Value" : {"Ref" : "CloudFormationBucket" }
        },
        "CloudFormationKey" : {
            "Value" : {"Ref" : "CloudFormationKey" }
        },
        "CloudFormationCommonKey" : {
            "Value" : {"Ref" : "CloudFormationCommonKey" }
        },
        "BuildVersion" : {
            "Value" : {"Ref" : "BuildVersion" }
        },
        "NotificationTaskMemoryAllocation" : {
            "Value" : {"Ref" : "NotificationTaskMemoryAllocation" }
        },
        "NotificationDesiredCount" : {
            "Value" : {"Ref" : "NotificationDesiredCount" }
        },
        "EnvECSClusterStack" : {
            "Value" : {"Ref" : "EnvECSClusterStack" }
        },
        "VpcId" : {
            "Value" : {"Ref" : "VpcId" }
        }
    }
}